
{% extends 'basic.html' %}

{% load static %}

{% block additional_head %}

{% endblock %}

{% block header %}

<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" href="#">Navbar</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
    <div class="navbar-nav">
      <a class="nav-item nav-link" href="{% url 'user:user_page' user.username %}">Персонажи</a>
      <a class="nav-item nav-link active" href="{% url 'combat:combat_list' %}">Бои</a>
      <a class="nav-item nav-link" href="#">Настройки</a>
    </div>
  </div>
</nav>

{% endblock %}

{% block content %}

    <div class="row">
            <div class="col-12 justify-content-center">
                {% for combat in combats %}
                    <div class="d-flex flex-row justify-content-around">
                        <div>{{combat.id}}</div>
                        <div>{{combat.name}}</div>
                        <div>{{combat.battle_type}}</div>
                        <div class="d-flex flex-row">
                            <!--Combat heroes-->
                            {% if combat.placement_type == 'FR' %}
                                <div class="d-flex flex-row justify-content-around">
                                    {% for hero in combat.left_team.all %}
                                        <div>{{hero.name}}</div>
                                    {% endfor %}
                                    {% if combat.left_team.all.count < combat.team_size and not user.heroapp.selected_hero.in_battle %}
                                        <div><a href="{% url 'combat:add' combat.id %}?team=left">Вступить</a></div>
                                    {% endif %}
                                </div>
                                <div> | </div>
                                <div class="d-flex flex-row justify-content-around">
                                    {% for hero in combat.right_team.all %}
                                        <div>{{hero.name}}</div>
                                    {% endfor %}
                                    {% if combat.right_team.all.count < combat.team_size and not user.heroapp.selected_hero.in_battle %}
                                        <div><a href="{% url 'combat:add' combat.id %}?team=right">Вступить</a></div>
                                    {% endif %}
                                </div>
                            {% elif combat.placement_type == 'EQ' %}
                                <div class="d-flex flex-row">
                                    {% for hero in combat.left_team.all %}
                                        <div>{{hero.name}}</div>
                                    {% endfor %}
                                    {% if combat.left_team.all.count <= combat.right_team.all.count and not user.heroapp.selected_hero.in_battle %}
                                        <div><a href="{% url 'combat:add' combat.id %}?team=left">Вступить</a></div>
                                    {% endif %}
                                </div>
                                <div> | </div>
                                <div class="d-flex flex-row">
                                    {% for hero in combat.right_team.all %}
                                        <div>{{hero.name}}</div>
                                    {% endfor %}
                                    {% if combat.right_team.all.count <= combat.left_team.all.count and not user.heroapp.selected_hero.in_battle %}
                                        <div><a href="{% url 'combat:add' combat.id %}?team=right">Вступить</a></div>
                                    {% endif %}
                                </div>
                            {% else %}
                                <div class="d-flex flex-row">
                                    {% for hero in combat.mg_team.all %}
                                        <div>{{hero.name}}</div>
                                    {% endfor %}
                                    {% if combat.left_team.all.count <= combat.right_team.all.count and not user.heroapp.selected_hero.in_battle %}
                                        <div><a href="{% url 'combat:add' combat.id %}">Вступить</a></div>
                                    {% endif %}
                            {% endif %}
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>

{% endblock %}
    
</body>
</html>
